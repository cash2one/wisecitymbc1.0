{% extends "index.html" %}
{% block main_content %}
<main class="login" role="main">
	<div class="container">
  <form id="setps-form">
		<div class="form-group" id="ufg">
			<div class="input-group">
				<div class="input-group-addon">
					<i class="fa fa-key fa-fw"></i>
				</div>
		  	<input type="password" name="old_password" class="form-control form-login" id="inputOldPassword" placeholder="请输入旧密码" >
			</div>
		</div>
		<div class="form-group" id="pfg">
			<div class="input-group">
				<div class="input-group-addon">
					<i class="fa fa-key fa-fw"></i>
				</div>
				<input type="password" name="new_password" class="form-control form-login" id="inputPassword" placeholder="请输入新密码" >
			</div>
		</div>
		<div class="form-group">
			<button type="submit" class="btn btn-login">确认</button>
		</div>
  </form>
  </div>
</main>
<script>
$(function() {
	var $form = $("#setps-form"), $old=$("#inputOldPassword"), $new=$("#inputPassword"), reg = /^.{6,20}$/;
	$("#setps-form").submit(function(e){
		e.preventDefault();
		if (!$new.val()||!reg.test($new.val())) {
			$new.error();
			return false;
		}
		API.url('users').url('my').url('set_password').post($form.serializeObject())
		.ok(function(data) {
			console.log('ok');
		})
		.paramError(function(){
			$old.error();
		});
		return false;
	});
});
</script>
{% endblock %}
