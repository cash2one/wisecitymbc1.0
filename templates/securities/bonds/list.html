{% extends "securities/base.html" %}
{% block main %}
<div class="container">
	<table class="table">
		<thead>
			<tr>
				<th>名称</th>
				<th>发布者</th>
				<th>状态</th>
			</tr>
		</thead>
		<tbody id="container">
		
		</tbody>
	</table>
</div>
<div class="pager">
	<button class="btn btn-link pull-left" id="prevBtn">上一页</button>
	<button class="btn btn-link pull-right" id="nextBtn">下一页</button>
</div>
{% endblock %}
{% block extra_script %}
<script type="text/javascript">
$(function(){
	API.list({
		apiUrl: API.url("bonds"),
		prev: 'prevBtn',
		next: 'nextBtn',
		container: 'container',
		processData: function(data){
			if (data.published) {
				data.state = '已发布'
			} else data.state = '未发布';
		},
		template: '<tr><th><a href="{url}">{display_name}</a></th><th><a href="{publisher.url}">{publisher.display_name}</a></th><th>{state}</th></tr>'
	});
});
</script>
{% endblock %}
